---
export interface Props {
  emoji: string;
  size?: number;
  class?: string;
}

const { emoji, size = 24, class: className = '' } = Astro.props;

// Convert emoji to unicode codepoint for twemoji URL
function emojiToCodepoints(emoji: string): string {
  // Get the codepoints of the emoji
  const codePoints = [...emoji]
    .map((char) => {
      const codePoint = char.codePointAt(0);
      if (!codePoint) return '';

      // Convert to hex and pad to at least 4 characters
      const hex = codePoint.toString(16).toLowerCase();
      return hex.length <= 4 ? hex.padStart(4, '0') : hex;
    })
    .filter((code) => code !== '' && code !== 'fe0f'); // Filter out variation selector

  return codePoints.join('-');
}

const codepoints = emojiToCodepoints(emoji);
const twemojiUrl = `https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/svg/${codepoints}.svg`;
---

<img
  src={twemojiUrl}
  alt={emoji}
  class={`inline-block ${className}`}
  style={`width: ${size}px; height: ${size}px; vertical-align: middle;`}
  loading="lazy"
/>
